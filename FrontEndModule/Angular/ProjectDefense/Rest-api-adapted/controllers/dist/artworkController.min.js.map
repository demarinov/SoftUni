{"version":3,"sources":["artworkController.js"],"names":["require","artworkModel","getArtworks","res","next","find","populate","req","json","artworks","getArt","artId","params","findById","then","art","getArtsByUserId","userId","arts","filter","_id","price","_req$body","body","name","imageUrl","user","log","module","exports","createArt"],"mappings":"0BAAyBA,QAAQ,aAAzBC,sBAAAA,aAER,SAASC,YAFgBF,EAAQG,EAAAC,GAAzBH,aAGSI,OACRC,SAAS,UAFTJ,KAAAA,SAAAA,GAAYK,OAAKJ,EAA1BK,KAAAC,KAFQR,MAGSI,GAIhB,SAAAK,OAAAH,EAAAJ,EAAAC,GAAA,IAGWO,EAAUJ,EAAIK,OAAdD,MADoBV,aACPY,SAAbF,GAERV,SAAaY,UAEAC,KAAO,SAAAC,GAACP,OAAKO,EAAbP,KAAAO,KALe,MAMjBX,GAGf,SAASY,gBAAgBT,EAAKJ,EAAKC,GAAM,IAC9Ba,EAAeL,EAAfK,OAAAA,OAKCC,aAAYC,OACRb,SAAWW,UADfH,KAAA,SAAAI,GAGA,OAAOf,EAAAe,EAAAC,OAAP,SAAAJ,GAEGX,OARXW,EAAAE,OAAAG,KAAAH,IAMed,EAAIK,KAAKU,KAHhBA,MAQuBd,GAAA,SACPiB,UADOd,EACPc,EADOjB,GAAA,IAAAkB,EAAAf,EAAAgB,KAAAC,EAAAF,EAAAE,KAEJC,EAFIH,EAEJG,SAFIJ,EAAAC,EAAAD,MAInBJ,EAAZV,EAAAmB,KAAQC,IACcH,QAAAA,IAAFP,GAAQA,aAAAA,OAAR,CAAAO,KAAAA,EAAAP,OAAAA,EAAAQ,SAAAA,EAAAJ,MAAAA,IAAgBI,KAAAA,SAAAA,GAAUJ,EAAAA,OAAAA,KAAAA,KAAAA,KAAlBJ,MAETb,GAKvBwB,OAAOC,QAAU,CAAjBD,UAAAA,UACIE,OAAAA,OACApB,YAAAA,YACAR,gBAAAA","file":"artworkController.min.js","sourcesContent":["const { artworkModel } = require('../models');\r\n\r\nfunction getArtworks(req, res, next) {\r\n    artworkModel.find()\r\n        .populate('userId')\r\n        .then(artworks => res.json(artworks))\r\n        .catch(next);\r\n}\r\n\r\nfunction getArt(req, res, next) {\r\n    const { artId } = req.params;\r\n\r\n    artworkModel.findById(artId)\r\n        .populate( 'userId')\r\n        .then(art => res.json(art))\r\n        .catch(next);\r\n}\r\n\r\nfunction getArtsByUserId(req, res, next) {\r\n    const {userId } = req.params;\r\n\r\n    artworkModel.find()\r\n        .populate( 'userId')\r\n        .then(arts => {\r\n            arts = arts.filter(art => {\r\n                return art.userId._id == userId\r\n            });\r\n            return res.json(arts);\r\n        })\r\n        .catch(next);\r\n}\r\n\r\nfunction createArt(req, res, next) {\r\n    const { name, imageUrl, price} = req.body;\r\n    const { _id: userId } = req.user;\r\n\r\n    console.log(userId);\r\n    artworkModel.create({ name, userId, imageUrl, price})\r\n        .then(art => {\r\n            res.status(200).json(art);\r\n        })\r\n        .catch(next);\r\n}\r\n\r\nmodule.exports = {\r\n    createArt,\r\n    getArt,\r\n    getArtworks,\r\n    getArtsByUserId\r\n}\r\n"]}