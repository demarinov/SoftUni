{"version":3,"sources":["artworkController.js"],"names":["require","artworkModel","getArtworks","res","next","find","populate","req","json","artworks","getTheme","themeId","params","themeModel","findById","path","then","theme","createArt","_req$body","body","name","price","userId","user","_id","create","imageUrl","art","subscribe","status","findByIdAndUpdate","$addToSet","subscribers","new","updatedTheme","module","exports"],"mappings":"0BAAyBA,QAAQ,aAAzBC,sBAAAA,aAER,SAASC,YAFgBF,EAAQG,EAAAC,GAAzBH,aAGSI,OACRC,SAAS,UAFTJ,KAAAA,SAAAA,GAAYK,OAAKJ,EAA1BK,KAAAC,KAFQR,MAGSI,GAIhB,SAAAK,SAAAH,EAAAJ,EAAAC,GAAA,IAGWO,EAAYJ,EAAIK,OAAhBD,QADsBE,WAAAC,SACNF,GAExBC,SAAWC,CAEIC,KADD,QAEET,SAAG,CACFS,KAAA,YAGFC,KAAO,SAAAC,GAAH,OAASA,EAAbT,KAAAS,KAVe,MAWnBb,GAGf,SAASc,UAAUX,EAAKJ,EAAKC,GAAM,IAAAe,EAAAZ,EAAAa,KAAAC,EAAAF,EAAAE,KACEd,EADFY,EACEZ,SADFe,EAAAH,EAAAG,MAAAC,EAAAhB,EAAAiB,KAAAC,IAAAxB,aAAAyB,OACPJ,CAAAA,KAAAA,EADOC,OAAAA,EAAAI,SAAAA,EAAAL,MAAAA,IAElBC,KAFkB,SAAAK,GAI/B3B,EAAayB,OAAO,KAAAlB,KAAAoB,KAJW,MAIHL,GAAR,SAApBM,UACUtB,EAAGJ,EAAIC,GACTD,IAAI2B,EAAYtB,EAAhBI,OAAAD,QAEGP,EAJXG,EAAAiB,KAAAC,IAKHZ,WAAAkB,kBAAA,CAAAN,IAAAd,GAAA,CAAAqB,UAAA,CAAAC,YAAAV,IAAA,CAAAW,KAAA,IAMQlB,KAAK,SAAAmB,GAJLN,EAAAA,OAAT,KAAArB,KAAA2B,KAFC,MAI2B5B,GACK6B,OAAkBC,QAAA,CAAEL,UAAAA,UAAaC,SAAAA,SAAFJ,UAAAA,UAA5D3B,YAAAA","file":"artworkController.min.js","sourcesContent":["const { artworkModel } = require('../models');\r\n\r\nfunction getArtworks(req, res, next) {\r\n    artworkModel.find()\r\n        .populate('userId')\r\n        .then(artworks => res.json(artworks))\r\n        .catch(next);\r\n}\r\n\r\nfunction getTheme(req, res, next) {\r\n    const { themeId } = req.params;\r\n\r\n    themeModel.findById(themeId)\r\n        .populate({\r\n            path : 'posts',\r\n            populate : {\r\n              path : 'userId'\r\n            }\r\n          })\r\n        .then(theme => res.json(theme))\r\n        .catch(next);\r\n}\r\n\r\nfunction createArt(req, res, next) {\r\n    const { name, imageUrl, price} = req.body;\r\n    const { _id: userId } = req.user;\r\n\r\n    artworkModel.create({ name, userId, imageUrl, price})\r\n        .then(art => {\r\n            res.status(200).json(art);\r\n        })\r\n        .catch(next);\r\n}\r\n\r\nfunction subscribe(req, res, next) {\r\n    const themeId = req.params.themeId;\r\n    const { _id: userId } = req.user;\r\n    themeModel.findByIdAndUpdate({ _id: themeId }, { $addToSet: { subscribers: userId } }, { new: true })\r\n        .then(updatedTheme => {\r\n            res.status(200).json(updatedTheme)\r\n        })\r\n        .catch(next);\r\n}\r\n\r\nmodule.exports = {\r\n    createArt,\r\n    getTheme,\r\n    subscribe,\r\n    getArtworks,\r\n}\r\n"]}