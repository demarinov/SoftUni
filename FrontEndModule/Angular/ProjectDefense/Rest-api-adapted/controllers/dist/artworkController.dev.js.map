{"version":3,"sources":["artworkController.js"],"names":["require","artworkModel","getArtworks","req","res","next","find","populate","then","artworks","json","getTheme","themeId","params","themeModel","findById","path","theme","createArt","body","name","imageUrl","price","userId","user","_id","create","art","status","subscribe","findByIdAndUpdate","$addToSet","subscribers","updatedTheme","module","exports"],"mappings":";;eAAyBA,OAAO,CAAC,WAAD,C;IAAxBC,Y,YAAAA,Y;;AAER,SAASC,WAAT,CAAqBC,GAArB,EAA0BC,GAA1B,EAA+BC,IAA/B,EAAqC;AACjCJ,EAAAA,YAAY,CAACK,IAAb,GACKC,QADL,CACc,QADd,EAEKC,IAFL,CAEU,UAAAC,QAAQ;AAAA,WAAIL,GAAG,CAACM,IAAJ,CAASD,QAAT,CAAJ;AAAA,GAFlB,WAGWJ,IAHX;AAIH;;AAED,SAASM,QAAT,CAAkBR,GAAlB,EAAuBC,GAAvB,EAA4BC,IAA5B,EAAkC;AAAA,MACtBO,OADsB,GACVT,GAAG,CAACU,MADM,CACtBD,OADsB;AAG9BE,EAAAA,UAAU,CAACC,QAAX,CAAoBH,OAApB,EACKL,QADL,CACc;AACNS,IAAAA,IAAI,EAAG,OADD;AAENT,IAAAA,QAAQ,EAAG;AACTS,MAAAA,IAAI,EAAG;AADE;AAFL,GADd,EAOKR,IAPL,CAOU,UAAAS,KAAK;AAAA,WAAIb,GAAG,CAACM,IAAJ,CAASO,KAAT,CAAJ;AAAA,GAPf,WAQWZ,IARX;AASH;;AAED,SAASa,SAAT,CAAmBf,GAAnB,EAAwBC,GAAxB,EAA6BC,IAA7B,EAAmC;AAAA,kBACEF,GAAG,CAACgB,IADN;AAAA,MACvBC,IADuB,aACvBA,IADuB;AAAA,MACjBC,QADiB,aACjBA,QADiB;AAAA,MACPC,KADO,aACPA,KADO;AAAA,MAElBC,MAFkB,GAEPpB,GAAG,CAACqB,IAFG,CAEvBC,GAFuB;AAI/BxB,EAAAA,YAAY,CAACyB,MAAb,CAAoB;AAAEN,IAAAA,IAAI,EAAJA,IAAF;AAAQG,IAAAA,MAAM,EAANA,MAAR;AAAgBF,IAAAA,QAAQ,EAARA,QAAhB;AAA0BC,IAAAA,KAAK,EAALA;AAA1B,GAApB,EACKd,IADL,CACU,UAAAmB,GAAG,EAAI;AACTvB,IAAAA,GAAG,CAACwB,MAAJ,CAAW,GAAX,EAAgBlB,IAAhB,CAAqBiB,GAArB;AACH,GAHL,WAIWtB,IAJX;AAKH;;AAED,SAASwB,SAAT,CAAmB1B,GAAnB,EAAwBC,GAAxB,EAA6BC,IAA7B,EAAmC;AAC/B,MAAMO,OAAO,GAAGT,GAAG,CAACU,MAAJ,CAAWD,OAA3B;AAD+B,MAElBW,MAFkB,GAEPpB,GAAG,CAACqB,IAFG,CAEvBC,GAFuB;AAG/BX,EAAAA,UAAU,CAACgB,iBAAX,CAA6B;AAAEL,IAAAA,GAAG,EAAEb;AAAP,GAA7B,EAA+C;AAAEmB,IAAAA,SAAS,EAAE;AAAEC,MAAAA,WAAW,EAAET;AAAf;AAAb,GAA/C,EAAuF;AAAE,WAAK;AAAP,GAAvF,EACKf,IADL,CACU,UAAAyB,YAAY,EAAI;AAClB7B,IAAAA,GAAG,CAACwB,MAAJ,CAAW,GAAX,EAAgBlB,IAAhB,CAAqBuB,YAArB;AACH,GAHL,WAIW5B,IAJX;AAKH;;AAED6B,MAAM,CAACC,OAAP,GAAiB;AACbjB,EAAAA,SAAS,EAATA,SADa;AAEbP,EAAAA,QAAQ,EAARA,QAFa;AAGbkB,EAAAA,SAAS,EAATA,SAHa;AAIb3B,EAAAA,WAAW,EAAXA;AAJa,CAAjB","sourcesContent":["const { artworkModel } = require('../models');\r\n\r\nfunction getArtworks(req, res, next) {\r\n    artworkModel.find()\r\n        .populate('userId')\r\n        .then(artworks => res.json(artworks))\r\n        .catch(next);\r\n}\r\n\r\nfunction getTheme(req, res, next) {\r\n    const { themeId } = req.params;\r\n\r\n    themeModel.findById(themeId)\r\n        .populate({\r\n            path : 'posts',\r\n            populate : {\r\n              path : 'userId'\r\n            }\r\n          })\r\n        .then(theme => res.json(theme))\r\n        .catch(next);\r\n}\r\n\r\nfunction createArt(req, res, next) {\r\n    const { name, imageUrl, price} = req.body;\r\n    const { _id: userId } = req.user;\r\n\r\n    artworkModel.create({ name, userId, imageUrl, price})\r\n        .then(art => {\r\n            res.status(200).json(art);\r\n        })\r\n        .catch(next);\r\n}\r\n\r\nfunction subscribe(req, res, next) {\r\n    const themeId = req.params.themeId;\r\n    const { _id: userId } = req.user;\r\n    themeModel.findByIdAndUpdate({ _id: themeId }, { $addToSet: { subscribers: userId } }, { new: true })\r\n        .then(updatedTheme => {\r\n            res.status(200).json(updatedTheme)\r\n        })\r\n        .catch(next);\r\n}\r\n\r\nmodule.exports = {\r\n    createArt,\r\n    getTheme,\r\n    subscribe,\r\n    getArtworks,\r\n}\r\n"],"file":"artworkController.dev.js"}