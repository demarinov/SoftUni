{"version":3,"sources":["artworkController.js"],"names":["require","artworkModel","getArtworks","req","res","next","find","populate","then","artworks","json","getArt","artId","params","findById","art","getArtsByUserId","userId","arts","filter","_id","createArt","body","name","imageUrl","price","user","console","log","create","status","module","exports"],"mappings":";;eAAyBA,OAAO,CAAC,WAAD,C;IAAxBC,Y,YAAAA,Y;;AAER,SAASC,WAAT,CAAqBC,GAArB,EAA0BC,GAA1B,EAA+BC,IAA/B,EAAqC;AACjCJ,EAAAA,YAAY,CAACK,IAAb,GACKC,QADL,CACc,QADd,EAEKC,IAFL,CAEU,UAAAC,QAAQ;AAAA,WAAIL,GAAG,CAACM,IAAJ,CAASD,QAAT,CAAJ;AAAA,GAFlB,WAGWJ,IAHX;AAIH;;AAED,SAASM,MAAT,CAAgBR,GAAhB,EAAqBC,GAArB,EAA0BC,IAA1B,EAAgC;AAAA,MACpBO,KADoB,GACVT,GAAG,CAACU,MADM,CACpBD,KADoB;AAG5BX,EAAAA,YAAY,CAACa,QAAb,CAAsBF,KAAtB,EACKL,QADL,CACe,QADf,EAEKC,IAFL,CAEU,UAAAO,GAAG;AAAA,WAAIX,GAAG,CAACM,IAAJ,CAASK,GAAT,CAAJ;AAAA,GAFb,WAGWV,IAHX;AAIH;;AAED,SAASW,eAAT,CAAyBb,GAAzB,EAA8BC,GAA9B,EAAmCC,IAAnC,EAAyC;AAAA,MAC9BY,MAD8B,GACnBd,GAAG,CAACU,MADe,CAC9BI,MAD8B;AAGrChB,EAAAA,YAAY,CAACK,IAAb,GACKC,QADL,CACe,QADf,EAEKC,IAFL,CAEU,UAAAU,IAAI,EAAI;AACVA,IAAAA,IAAI,GAAGA,IAAI,CAACC,MAAL,CAAY,UAAAJ,GAAG,EAAI;AACtB,aAAOA,GAAG,CAACE,MAAJ,CAAWG,GAAX,IAAkBH,MAAzB;AACH,KAFM,CAAP;AAGA,WAAOb,GAAG,CAACM,IAAJ,CAASQ,IAAT,CAAP;AACH,GAPL,WAQWb,IARX;AASH;;AAED,SAASgB,SAAT,CAAmBlB,GAAnB,EAAwBC,GAAxB,EAA6BC,IAA7B,EAAmC;AAAA,kBACEF,GAAG,CAACmB,IADN;AAAA,MACvBC,IADuB,aACvBA,IADuB;AAAA,MACjBC,QADiB,aACjBA,QADiB;AAAA,MACPC,KADO,aACPA,KADO;AAAA,MAElBR,MAFkB,GAEPd,GAAG,CAACuB,IAFG,CAEvBN,GAFuB;AAI/BO,EAAAA,OAAO,CAACC,GAAR,CAAYX,MAAZ;AACAhB,EAAAA,YAAY,CAAC4B,MAAb,CAAoB;AAAEN,IAAAA,IAAI,EAAJA,IAAF;AAAQN,IAAAA,MAAM,EAANA,MAAR;AAAgBO,IAAAA,QAAQ,EAARA,QAAhB;AAA0BC,IAAAA,KAAK,EAALA;AAA1B,GAApB,EACKjB,IADL,CACU,UAAAO,GAAG,EAAI;AACTX,IAAAA,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBpB,IAAhB,CAAqBK,GAArB;AACH,GAHL,WAIWV,IAJX;AAKH;;AAED0B,MAAM,CAACC,OAAP,GAAiB;AACbX,EAAAA,SAAS,EAATA,SADa;AAEbV,EAAAA,MAAM,EAANA,MAFa;AAGbT,EAAAA,WAAW,EAAXA,WAHa;AAIbc,EAAAA,eAAe,EAAfA;AAJa,CAAjB","sourcesContent":["const { artworkModel } = require('../models');\r\n\r\nfunction getArtworks(req, res, next) {\r\n    artworkModel.find()\r\n        .populate('userId')\r\n        .then(artworks => res.json(artworks))\r\n        .catch(next);\r\n}\r\n\r\nfunction getArt(req, res, next) {\r\n    const { artId } = req.params;\r\n\r\n    artworkModel.findById(artId)\r\n        .populate( 'userId')\r\n        .then(art => res.json(art))\r\n        .catch(next);\r\n}\r\n\r\nfunction getArtsByUserId(req, res, next) {\r\n    const {userId } = req.params;\r\n\r\n    artworkModel.find()\r\n        .populate( 'userId')\r\n        .then(arts => {\r\n            arts = arts.filter(art => {\r\n                return art.userId._id == userId\r\n            });\r\n            return res.json(arts);\r\n        })\r\n        .catch(next);\r\n}\r\n\r\nfunction createArt(req, res, next) {\r\n    const { name, imageUrl, price} = req.body;\r\n    const { _id: userId } = req.user;\r\n\r\n    console.log(userId);\r\n    artworkModel.create({ name, userId, imageUrl, price})\r\n        .then(art => {\r\n            res.status(200).json(art);\r\n        })\r\n        .catch(next);\r\n}\r\n\r\nmodule.exports = {\r\n    createArt,\r\n    getArt,\r\n    getArtworks,\r\n    getArtsByUserId\r\n}\r\n"],"file":"artworkController.dev.js"}