{"version":3,"sources":["profile.component.ts"],"names":[],"mappings":";;;;;;;;AAAA,sCAA6D;AAW7D;IAQE,0BAAoB,WAAwB,EAAU,MAAa;QAA/C,gBAAW,GAAX,WAAW,CAAa;QAAU,WAAM,GAAN,MAAM,CAAO;QANnE,eAAU,GAAY,KAAK,CAAC;IAM2C,CAAC;IAExE,mCAAQ,GAAR;QAAA,iBAYC;QAVC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC;YACvC,IAAI,EAAE,UAAA,IAAI;gBACR,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACpB,CAAC;YACD,KAAK,EAAE,UAAA,KAAK;gBACV,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBACnB,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YAClC,CAAC;SACF,CAAC,CAAA;IACJ,CAAC;IAED,wCAAa,GAAb;QAAA,iBAcC;QAbC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QAEvB,UAAU,CAAC;YAET,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,CAAC;gBACnC,KAAK,EAAE,KAAI,CAAC,WAAW,CAAC,KAAK;gBAC7B,QAAQ,EAAE,KAAI,CAAC,WAAW,CAAC,QAAQ;gBACnC,YAAY,EAAE,KAAI,CAAC,WAAW,CAAC,GAAG,IAAI,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC;oBACrE,CAAC,CAAC,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;gBAC1C,GAAG,EAAE,KAAI,CAAC,WAAW,CAAC,GAAG,IAAI,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC;oBAC5D,CAAC,CAAC,KAAI,CAAC,WAAW,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAI,CAAC,WAAW,CAAC,GAAG;aAC3D,CAAC,CAAA;QACJ,CAAC,CAAC,CAAA;IACJ,CAAC;IAED,wCAAa,GAAb;QAAA,iBAiBC;QAhBC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;QACxC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,mBAAmB;QAEnB,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,GAAG,CAAC;QAC3G,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC;YAClE,IAAI,EAAE,UAAA,IAAI;gBACR,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACpB,CAAC;YACD,KAAK,EAAE,UAAA,KAAK;gBACV,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBACnB,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;YAClC,CAAC;SACF,CAAC,CAAC;IAEL,CAAC;IAnD6B;QAA7B,gBAAS,CAAC,iBAAiB,CAAC;qDAAwB;IAN1C,gBAAgB;QAL5B,gBAAS,CAAC;YACT,QAAQ,EAAE,aAAa;YACvB,WAAW,EAAE,0BAA0B;YACvC,SAAS,EAAE,CAAC,yBAAyB,CAAC;SACvC,CAAC;OACW,gBAAgB,CA0D5B;IAAD,uBAAC;CA1DD,AA0DC,IAAA;AA1DY,4CAAgB","file":"profile.component.js","sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { UserService } from 'src/app/core/user.service';\nimport { IUser } from 'src/app/interfaces';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html',\n  styleUrls: ['./profile.component.css']\n})\nexport class ProfileComponent implements OnInit {\n\n  inEditMode: boolean = false;\n\n  currentUser!: IUser;\n\n  @ViewChild('editProfileForm') editProfileForm!:NgForm\n\n  constructor(private userService: UserService, private router:Router) { }\n\n  ngOnInit(): void {\n\n    this.userService.getProfile$().subscribe({\n      next: user => {\n        this.currentUser = user;\n        console.log(user);\n      },\n      error: error => {\n        console.log(error);\n        this.router.navigate(['/home']);\n      }\n    })\n  }\n\n  enterEditMode() : void {\n    this.inEditMode = true;\n\n    setTimeout(() => {\n\n      this.editProfileForm.form.patchValue({\n        email: this.currentUser.email,\n        username: this.currentUser.username,\n        'select-tel': this.currentUser.tel && this.currentUser.tel.length > 6 \n        ? this.currentUser.tel.substring(0,4) : '',\n        tel: this.currentUser.tel && this.currentUser.tel.length > 6 \n        ? this.currentUser.tel.substring(4) : this.currentUser.tel\n      })\n    })\n  }\n\n  updateProfile() : void {\n    console.log(this.editProfileForm.value);\n    this.inEditMode = false;\n    // make put request\n\n    this.editProfileForm.value.tel = this.editProfileForm.value['select-tel'] + this.editProfileForm.value.tel;\n    this.userService.editProfile$(this.editProfileForm.value).subscribe({\n      next: user => {\n        this.currentUser = user;\n        console.log(user);\n      },\n      error: error => {\n        console.log(error);\n        this.router.navigate(['/home']);\n      }\n    });\n\n  }\n}\n"]}