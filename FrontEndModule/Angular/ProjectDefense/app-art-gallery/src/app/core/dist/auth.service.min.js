"use strict";var __decorate=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;0<=u;u--)(o=e[u])&&(s=(i<3?o(s):3<i?o(t,r,s):o(t,r))||s);return 3<i&&s&&Object.defineProperty(t,r,s),s};exports.__esModule=!0;var core_1=require("@angular/core"),rxjs_1=require("rxjs"),environment_1=require("src/environments/environment"),_store_1=require("../+store"),AuthService=function(){function e(e,t){this.httpClient=e,this.store=t,this.currentUser$=this.store.select(function(e){return e.currentUser}),this.isLoggedIn$=this.currentUser$.pipe(rxjs_1.map(function(e){return!!e}))}return e.prototype.handleLogin=function(e){this.store.dispatch(_store_1.login({user:e}))},e.prototype.handleLogout=function(e){this.store.dispatch(_store_1.logout())},e.prototype.login$=function(e){return this.httpClient.post(environment_1.environment.apiUrl+"/login",e,{withCredentials:!0,observe:"response"}).pipe(rxjs_1.tap(function(e){return console.log(e)}),rxjs_1.map(function(e){return e.body}))},e.prototype.authenticate$=function(){var t=this;return this.httpClient.get(environment_1.environment.apiUrl+"/users/profile",{withCredentials:!0}).pipe(rxjs_1.tap(function(e){return t.handleLogin(e)}),rxjs_1.catchError(function(e){return rxjs_1.EMPTY}))},e.prototype.logout$=function(){return console.log("logout called"),this.httpClient.post(environment_1.environment.apiUrl+"/logout",{},{withCredentials:!0})},e.prototype.register$=function(e){return this.httpClient.post(environment_1.environment.apiUrl+"/register",e,{withCredentials:!0})},e=__decorate([core_1.Injectable({providedIn:"root"})],e)}();exports.AuthService=AuthService;
//# sourceMappingURL=auth.service.min.js.map
